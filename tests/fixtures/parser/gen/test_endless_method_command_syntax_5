--INPUT
def rescued(x) = raise "to be caught" rescue "instance #{x}"
--LOCATIONS
~~~ keyword (root)
    ~~~~~~~ name (root)
               ~ assignment (root)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ expression (root)
           ~ begin (root -> args)
             ~ end (root -> args)
           ~~~ expression (root -> args)
            ~ expression (root -> args -> arglist -> 0)
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ expression (root -> body)
                 ~~~~~ selector (root -> body -> body)
                 ~~~~~~~~~~~~~~~~~~~~ expression (root -> body -> body)
                       ~ begin (root -> body -> body -> args -> 0)
                                    ~ end (root -> body -> body -> args -> 0)
                       ~~~~~~~~~~~~~~ expression (root -> body -> body -> args -> 0)
                                      ~~~~~~ keyword (root -> body -> rescue_bodies -> 0)
                                      ~~~~~~~~~~~~~~~~~~~~~~ expression (root -> body -> rescue_bodies -> 0)
                                             ~ begin (root -> body -> rescue_bodies -> 0 -> body)
                                                           ~ end (root -> body -> rescue_bodies -> 0 -> body)
                                             ~~~~~~~~~~~~~~~ expression (root -> body -> rescue_bodies -> 0 -> body)
                                              ~~~~~~~~~ expression (root -> body -> rescue_bodies -> 0 -> body -> parts -> 0)
                                                       ~~ begin (root -> body -> rescue_bodies -> 0 -> body -> parts -> 1)
                                                          ~ end (root -> body -> rescue_bodies -> 0 -> body -> parts -> 1)
                                                       ~~~~ expression (root -> body -> rescue_bodies -> 0 -> body -> parts -> 1)
                                                         ~ expression (root -> body -> rescue_bodies -> 0 -> body -> parts -> 1 -> stmts -> 0)
--AST
s(:def, "rescued",
  s(:args,
    s(:arg, "x")),
  s(:rescue,
    s(:send, nil, "raise",
      s(:str, "to be caught")),
    s(:resbody, nil, nil,
      s(:dstr,
        s(:str, "instance "),
        s(:begin,
          s(:lvar, "x")))), nil))
