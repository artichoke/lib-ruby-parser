fn contents() -> String {
    let nodes = lib_ruby_parser_nodes::nodes();

    format!(
        "// This file is autogenerated by {generator}

{mods}

{uses}
",
        generator = file!(),
        mods = nodes.map(&mod_).join("\n"),
        uses = nodes.map(&use_).join("\n")
    )
}

pub(crate) fn codegen() {
    std::fs::write("src/nodes/types/mod.rs", contents()).unwrap();
}

fn mod_(node: &lib_ruby_parser_nodes::Node) -> String {
    format!("mod {};", node.filename)
}

fn use_(node: &lib_ruby_parser_nodes::Node) -> String {
    format!("pub use {}::{};", node.filename, node.struct_name)
}
